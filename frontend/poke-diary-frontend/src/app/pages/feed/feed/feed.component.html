<div class="feed-container">
    <h2 class="title">Desafios da Comunidade</h2>

    <div class="filtros">
        <mat-form-field appearance="fill" class="filtro-select">
            <mat-label>Tipo</mat-label>
            <mat-select [(ngModel)]="selectedType" (selectionChange)="applyFilters()">
                <mat-option *ngFor="let tipo of tipos" [value]="tipo">{{ tipo }}</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="filtro-select">
            <mat-label>Status</mat-label>
            <mat-select [(ngModel)]="selectedStatus" (selectionChange)="applyFilters()">
                <mat-option *ngFor="let status of statusList" [value]="status">{{ status | titlecase }}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="feed-grid">
        <mat-card *ngFor="let challenge of filteredChallenges" class="feed-card">
            <mat-card-header>
                <mat-card-title>{{ challenge.name }}</mat-card-title>
                <mat-card-subtitle>{{ challenge.type }} - {{ challenge.status | titlecase }}</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <p><strong>Capturados:</strong></p>
                <div class="sprite-list">
                    <img *ngFor="let pkm of challenge.progress.caught" [src]="getPokemonSprite(pkm)" [alt]="pkm"
                        class="sprite" />
                </div>

                <p><strong>Ins√≠gnias:</strong> {{ challenge.progress.badges.join(', ') || 'Nenhuma' }}</p>
            </mat-card-content>

            <mat-card-actions>
                <button mat-button [routerLink]="['/challenge', challenge.id]">
                    Ver Detalhes
                </button>
            </mat-card-actions>
        </mat-card>
    </div>
</div>